<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Order Summary - Vespa Elegance</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container my-5">
  <div class="text-center">
    <h2 class="text-success">Order Placed Successfully!</h2>
    <p>Thank you for your order, <strong><%= order.user.name %></strong>.</p>
    <p>Your order ID is: <strong><%= order._id %></strong></p>

    <h4>Order Summary</h4>
    <table class="table table-bordered mx-auto" style="max-width: 600px;">
      <thead>
        <tr>
          <th>Product</th>
          <th>Quantity</th>
          <th>Price</th>
          <th>Total</th>
        </tr>
      </thead>
      <tbody>
        <% order.products.forEach(item => { %>
          <tr>
            <td><%= item.productId.name %></td>
            <td><%= item.quantity %></td>
            <td>₹<%= item.price %></td>
            <td>₹<%= item.price * item.quantity %></td>
          </tr>
        <% }) %>
      </tbody>
    </table>

    <p><strong>Subtotal:</strong> ₹<%= order.price %></p>
    <p><strong>Discount:</strong> ₹<%= order.discount %></p>
    <p><strong>Final Price:</strong> ₹<%= order.finalPrice %></p>
    <p><strong>Payment Method:</strong> <%= order.paymentMethod %></p>

    <h4>Shipping Address</h4>
    <p>
      <%= order.address.street %>, <%= order.address.city %>, <%= order.address.state %>, <%= order.address.country %> - <%= order.address.zip %><br>
      Phone: <%= order.address.phone %>
    </p>

    <% if(order.invoicePath){ %>
      <a href="<%= order.invoicePath %>" class="btn btn-primary mt-3" target="_blank">Download Invoice</a>
    <% } %>

    <a href="/myorders" class="btn btn-secondary mt-3">View My Orders</a>
  </div>
</div>
</body>
</html>
